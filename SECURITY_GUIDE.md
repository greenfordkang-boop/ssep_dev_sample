# 🔒 신성EP 샘플 관리 시스템 보안 가이드

## 📍 데이터 파일 저장 위치

### 로컬 파일 저장 경로
현재 프로젝트 폴더에 저장됩니다:

**Windows 경로:**
```
C:\Users\mfg32\OneDrive\바탕 화면\automation\ssep-dev-sample\ssep_data.json
C:\Users\mfg32\OneDrive\바탕 화면\automation\ssep-dev-sample\ssep_history.json
```

**참고:** 
- 파일은 Streamlit 앱이 실행되는 **현재 작업 디렉토리**에 저장됩니다
- `run.bat` 파일이 있는 폴더와 동일한 위치입니다
- 절대 경로를 확인하려면 앱 실행 중 터미널에서 `pwd` (Linux/Mac) 또는 `cd` (Windows) 명령어로 확인하세요

### Google Sheets 사용 시
- 데이터는 Google Sheets에 저장되며, 로컬 파일은 백업용으로만 사용됩니다
- Google Sheets의 실제 위치는 Google Drive 계정 내부입니다

---

## 🛡️ 보안 체크리스트

### 1. 파일 접근 권한 관리

#### ✅ 해야 할 것
- [ ] **파일 권한 설정**: JSON 파일에 대한 접근 권한을 제한
  - Windows: 파일 속성 → 보안 → 사용자 권한 제한
  - Linux/Mac: `chmod 600 ssep_data.json ssep_history.json` (소유자만 읽기/쓰기)
  
- [ ] **폴더 접근 제한**: 프로젝트 폴더 자체에 대한 접근 권한 제한
  - 공유 폴더나 네트워크 드라이브에 저장하지 않기
  - OneDrive 동기화 폴더 사용 시 주의 (클라우드에 자동 업로드됨)

- [ ] **백업 파일 보안**: 백업 파일도 동일한 보안 수준 적용

#### ❌ 하지 말아야 할 것
- [ ] 공용 컴퓨터나 공유 폴더에 저장하지 않기
- [ ] 이메일이나 메신저로 JSON 파일 전송하지 않기
- [ ] GitHub나 공개 저장소에 업로드하지 않기 (`.gitignore`에 이미 포함됨)

---

### 2. Google Sheets 보안 설정

#### ✅ 해야 할 것
- [ ] **Google Sheets 공유 설정**
  - "링크가 있는 모든 사용자" 공유 비활성화
  - 특정 이메일 주소만 공유 (서비스 계정 + 관리자만)
  - "뷰어" 권한은 최소한으로 제한

- [ ] **서비스 계정 키 파일 보안**
  - `service_account.json` 파일을 절대 공유하지 않기
  - `.gitignore`에 포함되어 있는지 확인
  - 파일이 실수로 업로드되지 않았는지 GitHub에서 확인

- [ ] **Google Cloud Console 설정**
  - 서비스 계정 키가 유출된 경우 즉시 삭제하고 새로 생성
  - API 키 사용량 모니터링 설정
  - 의심스러운 활동 알림 설정

#### ❌ 하지 말아야 할 것
- [ ] Google Sheets를 "링크가 있는 모든 사용자"로 공유하지 않기
- [ ] 서비스 계정 JSON 파일을 이메일이나 메신저로 전송하지 않기
- [ ] 공개 웹사이트나 문서에 Spreadsheet ID 노출하지 않기

---

### 3. 애플리케이션 보안

#### ✅ 해야 할 것
- [ ] **로그인 보안**
  - 강력한 비밀번호 정책 적용
  - 정기적인 비밀번호 변경
  - 불필요한 계정 삭제

- [ ] **Streamlit Cloud 배포 시**
  - `st.secrets`를 통한 민감 정보 관리
  - Secrets에 접근할 수 있는 사용자 제한
  - 앱 URL을 공개하지 않기 (비공개 배포)

- [ ] **네트워크 보안**
  - HTTPS 사용 (Streamlit Cloud는 자동 적용)
  - 로컬 실행 시 방화벽 설정 확인

#### ❌ 하지 말아야 할 것
- [ ] 하드코딩된 비밀번호나 API 키 사용하지 않기
- [ ] 공개 채널에서 로그인 정보 공유하지 않기
- [ ] 개발/테스트 환경의 데이터를 프로덕션과 혼용하지 않기

---

### 4. 데이터 유출 방지

#### ✅ 해야 할 것
- [ ] **데이터 마스킹**
  - 개발/테스트 시 실제 고객사 정보 대신 더미 데이터 사용
  - 스크린샷이나 로그에 실제 데이터가 포함되지 않도록 주의

- [ ] **접근 로그 관리**
  - 정기적으로 접근 로그 확인
  - 의심스러운 활동 감지 시 즉시 조치

- [ ] **데이터 암호화**
  - 전송 중 암호화: HTTPS 사용 (Streamlit Cloud 자동 적용)
  - 저장 중 암호화: Google Sheets는 자동 암호화됨
  - 로컬 파일: Windows BitLocker 또는 디스크 암호화 사용 권장

#### ❌ 하지 말아야 할 것
- [ ] 스크린샷이나 화면 공유 시 고객사 정보 노출하지 않기
- [ ] 로그 파일에 민감 정보 기록하지 않기
- [ ] 데이터베이스 덤프나 백업 파일을 안전하지 않은 위치에 저장하지 않기

---

### 5. 정기적인 보안 점검

#### ✅ 월간 점검 항목
- [ ] 모든 사용자 계정 및 권한 검토
- [ ] Google Sheets 공유 설정 확인
- [ ] 서비스 계정 키 파일 위치 및 접근 권한 확인
- [ ] 백업 파일의 보안 상태 확인
- [ ] `.gitignore` 파일이 올바르게 설정되어 있는지 확인

#### ✅ 분기별 점검 항목
- [ ] 비밀번호 변경
- [ ] 사용하지 않는 계정 삭제
- [ ] 보안 로그 검토
- [ ] 데이터 접근 패턴 분석

---

## 🚨 보안 사고 대응 절차

### 1. 데이터 유출 의심 시
1. **즉시 조치**
   - 해당 계정의 비밀번호 변경
   - Google Sheets 공유 설정 확인 및 수정
   - 서비스 계정 키 재생성 (필요 시)

2. **영향 범위 파악**
   - 어떤 데이터가 노출되었는지 확인
   - 노출된 시간대 확인
   - 접근 가능한 사용자 목록 확인

3. **복구 조치**
   - 백업에서 안전한 데이터로 복구
   - 모든 계정 비밀번호 변경
   - 보안 설정 재점검

### 2. 계정 침해 시
1. 해당 계정 즉시 비활성화
2. 모든 세션 종료
3. 새로운 계정 생성 및 권한 재설정
4. 보안 로그 분석

---

## 📋 보안 체크리스트 (배포 전 확인)

### 로컬 개발 환경
- [ ] `ssep_data.json`, `ssep_history.json`이 `.gitignore`에 포함되어 있음
- [ ] 서비스 계정 JSON 파일이 `.gitignore`에 포함되어 있음
- [ ] 하드코딩된 비밀번호나 API 키가 없음
- [ ] 로그에 민감 정보가 출력되지 않음

### Streamlit Cloud 배포
- [ ] `st.secrets`에 모든 민감 정보가 저장되어 있음
- [ ] 코드에 하드코딩된 비밀번호나 API 키가 없음
- [ ] 앱 URL이 공개되지 않음 (필요 시)
- [ ] Google Sheets 공유 설정이 올바르게 되어 있음

### Google Sheets 설정
- [ ] "링크가 있는 모든 사용자" 공유 비활성화
- [ ] 서비스 계정과 관리자만 편집 권한 보유
- [ ] Spreadsheet ID가 코드에 하드코딩되지 않음 (Secrets 사용)

---

## 🔐 추가 보안 권장사항

### 1. 데이터베이스 마이그레이션 고려
- 장기적으로는 전용 데이터베이스(PostgreSQL, MySQL 등) 사용 검토
- 더 세밀한 접근 제어 및 감사 로그 가능

### 2. 2단계 인증 (2FA)
- Google 계정에 2FA 활성화
- 관리자 계정에 추가 보안 레이어 적용

### 3. 정기적인 보안 감사
- 외부 보안 전문가의 정기적인 감사
- 취약점 스캔 및 패치 관리

### 4. 직원 교육
- 보안 인식 교육 실시
- 데이터 유출 방지 모범 사례 공유
- 정기적인 보안 훈련

---

## 📞 보안 관련 문의

보안 사고나 의심스러운 활동을 발견한 경우:
1. 즉시 시스템 관리자에게 보고
2. 해당 계정 비활성화
3. 보안 로그 보존
4. 필요 시 법적 조치 검토

---

## ⚠️ 중요 경고

**이 문서의 내용은 보안 가이드일 뿐입니다. 실제 보안 정책은 회사의 정보보안 정책에 따라 결정되어야 합니다.**

**프로그램 수정 전 반드시 승인을 받으세요.**
- 코드 변경 시 보안 검토 필요
- 데이터 구조 변경 시 백업 필수
- 배포 전 테스트 환경에서 충분한 검증 필요

---

**최종 업데이트:** 2024년 12월
**문서 버전:** 1.0

